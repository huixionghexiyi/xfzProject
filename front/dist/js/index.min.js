function Banner(){this.bannerWidth=795,this.bannerGroup=$("#banner_gruop"),this.bannerUl=$("#banner_ul"),this.index=1,this.leftArrow=$("#left_arrow"),this.rightArrow=$("#right_arrow"),this.liList=this.bannerUl.children("li"),this.pageControl=$("#page_control"),this.bannerCount=this.liList.length}function Index(){this.page=2,this.category_id=0}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();this.bannerUl.append(t),this.bannerUl.prepend(e),this.bannerUl.css({width:(n.bannerCount+2)*n.bannerWidth,left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=$(".page_control"),t=0;t<this.bannerCount;t++){var e=$("<li></li>");n.append(e),0===t&&e.addClass("active")}n.css({width:26*this.bannerCount})},Banner.prototype.toggleArrow=function(n){n?(this.leftArrow.show(),this.rightArrow.show()):(this.leftArrow.hide(),this.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;this.bannerUl.stop().animate({left:-n.bannerWidth*n.index},500);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;n.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenPageCotrol=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n,e.animate(),$(t).addClass("active").siblings().removeClass("active")})})},Banner.prototype.listenBannerHover=function(){var n=this;n.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerWidth*n.bannerCount}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.run=function(){this.loop(),this.listenArrowClick(),this.listenBannerHover(),this.initPageControl(),this.initBanner(),this.listenPageCotrol()},Index.prototype.listenMoreNewsEvent=function(){var i=this;moreNewsBtn=$("#load-more-btn"),moreNewsBtn.click(function(){$.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list_inner_group").append(e),i.page+=1}else moreNewsBtn.hide()}}})})},Index.prototype.listenCategorySwitchEnvet=function(){var a=this,n=$(".list_tab"),o=$(".list_inner_group");moreNewsBtn=$("#load-more-btn"),n.children().click(function(){var i=$(this),r=i.attr("date-category");$.get({url:"/news/list/",data:{category_id:r},dataType:"json",success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t});o.empty(),o.append(e),i.addClass("active").siblings().removeClass("active"),a.category_id=r,a.page=2,moreNewsBtn.show()}}})})},Index.prototype.listenNavSwitchEnvet=function(){$(".nav").children().click(function(){$(this).addClass("active").siblings().removeClass("active")})},Index.prototype.run=function(){var n=this;n.listenMoreNewsEvent(),n.listenCategorySwitchEnvet(),n.listenNavSwitchEnvet()},$(function(){var n=new Banner;(new Index).run(),n.run()});